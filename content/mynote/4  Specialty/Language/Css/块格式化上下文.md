---
title: Css 块格式化上下文
date: 2021-10-07 6:00:00
categories:
        - 编程语言
tags:
        - Css
        - 前端
        - 学习笔记
---

# 块格式化上下文

格式化上下文（Block Formatting Context），它是一块 **独立的渲染区域**，它规定了在该区域中，普通流块盒的布局。

## 触发 BFC 的元素

- 根元素 html，该元素创建的 BFC 覆盖了文档中的所有元素。
- 浮动元素，float 的值不为 none 的元素。
- 绝对定位元素，position 的值为 absolute 或 fixed 的元素。
- overflow 的值不为 visible 的块盒。
- 行块盒，display 的值为 inline-block 的元素。
- 表格单元格，display 的值为 table-cell 的元素，表格单元格默认为该值。
- 表格标题，display 的值为 table-caption 的元素，表格标题默认为该值。

## 正常布局流块盒的渲染区域

- 每个块盒都会参与块格式化上下文的创建。
- 不同的 BFC，它们进行渲染时互不干扰。
- 创建 BFC 的元素，隔绝了它内部和外部的联系，内部的渲染不会影响到外部区域。
- 创建 BFC 的元素，它的所有内容都会被包含在它所创建的 BFC 中

## BFC 的作用

**解决高度塌陷**

创建 BFC 的元素，它的自动高度会计算浮动元素；若只是为了创建 BFC 一般使用副作用最小的方式：设置块盒的 overflow 的属性值为 hidden。仅仅是为了解决高度坍塌，建议使用伪元素 after。

**原理**：因为它要隔绝内部与外部的关系，而高度坍塌会使元素不在其包含块内，所以它的自动高度必须计算浮动元素，因此创建 BFC 可以解决高度坍塌的问题。

**解决浮动流脱离文档流**

创建了 BFC 的元素，普通流元素不会与浮动元素合并。

**原理**：在一个浮动元素后面放一个正常布局流元素，默认情况下浮动元素会覆盖正常布局流元素，因此可以给普通流创建 BFC，即可解决浮动元素脱离文档流。类似于给正常布局流元素设置了 margin，使普通流元素刚好避开浮动元素。这时候可能给正常布局流元素设置 margin 会无效，因此可以设置浮动元素的 margin，使浮动元素的 margin 将正常布局流元素挤开。

**解决 margin 合并**

创建 BFC 的元素，不会和它的子元素发生 margin 合并。

当两个元素处于两个不同的父元素创建的 BFC 时，它们的渲染是互不干扰的，因此两个元素的 margin 不会合并。

**注意**：当两个子元素处于同一个父元素所创建的 BFC 时，则两个子元素的 margin 会合并。
