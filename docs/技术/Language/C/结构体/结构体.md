---
title: C 结构体
date: 2022-04-15
categories:
        - Note
tags:
        - C
        - 结构体
---

# 结构体

将一些基本类型数据组合在一起，形成一个新的复合数据类型，这个复合数据类型，就是结构体。

### 为什么需要结构体

为了表示一些复杂的事物，而普通的基本类型无法满足我们的实际需求。



## 结构体的定义

结构体的名字代表着结构体类型

结构体最后的分号不能省去。

结构所占的存储单元，会根据结构体类型中所包含的成员来计算。

### 组成

```c
struct 结构体名
{
成员表列（类型名 成员名）
} 变量名表列;
```

### 先声明结构体类型，再定义变量（常用）

变量名由我们使用这个变量类型的时候定义。

```c
struct Student{
    int age;
    float score;
    char sex;
};
student1,student2
```

其中 student1 和 student2 就具有 struct Student 类型的结构。

### 声明类型的同时定义变量

定义的同时，也将变量名定义了，但也将变量名写死了。，无法灵活的定义其他变量。

```c
struct Students{
    int age;
    float score;
    char sex;
} student1,student2;
```

### 不指定类型，直接定义变量

没有定义结构体名，只定义了变量名。无法定义其他变量。

```c
struct{
    int age;
    float score;
    char sex;
}student1,student2;

```

## 共用体

共用体类型是一种特殊的数据类型，它允许在同一段内存中存储不同类型的数据。即**几个变量共用一个内存区。**

共用体类型的变量只能同时保存一个成员的值，如果对新的成员赋值，就会覆盖掉原来的值。

共用体类型的优点是节省空间，缺点是不灵活，容易出错。

```c
union 共用体名
{
    成员表列
} 变量表列;
```

共用体和结构体的定义很相似，但他们含义不同

1. 结构体变量所占内存长度是各成员所占长度之和，每个成员都有自己的内存单元。
2. 共用体变量所占内存长度等于最长的成员所占的内存长度。

### 引用

共用体变量无法被引用，只能引用共用体变量中的成员。用**共用体变量.成员名** 来引用

### 特点

1. 每个共用体变量只能存放成员中的某一个成员的值，重复赋值的话，新值会覆盖旧值。
2. 可以对共用体变量初始化，但初始化只能有一个常量，无法同时初始化所有成员。
3. 共用体变量和它的成员的地址都是同一个地址。
4. 不能对共用体变量名赋值，也无法用变量名来引用一个值。
5. C99 允许只用共用体变量作为函数参数
6. 共用体类型可以在出现在结构体类型的定义中，也可以定义共用体数组。反过来，结构体类型也可以出现在共用体类型的定义中，数组也可以作为共用体的成员。。
