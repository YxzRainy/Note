---
title: Css 基本概念
date: 2021-10-09
categories:
        - Note
tags:
        - CSS
        - 前端
---

# CSS 基本概念

用于定义 HTML 元素的显示形式，美化我们的 HTML 文档。

CSS 的语法通常是一个选择器，用于选择 HTML 文档中的元素。

```css
.selector {
	color: #000;
}
```

## 为什么使用

专注于显示。使内容与内容样式分离。

## 使用 CSS

内联式：将 CSS 语法书写到元素的 style 属性中，仅对当前元素生效，也叫行内式。

内嵌式：首先将 style 元素书写到 head 元素中，然后将 CSS 语法书写到 style 元素中，也叫内部样式表。

外链式：将 CSS 语法书写到独立的 CSS 文件中，并在 HTML 文档中使用 link 元素引入，也叫外部样式表。

优先级：**内联式 > 内嵌式 > 外链式**。

## 选择器

用于选择 HTML 文档中的元素。

### 通配符选择器

选择文档中的所有元素。

### 标签选择器

选择指定标签的元素。

### 类选择器

选择指定 class 的元素。

### ID 选择器

元素指定 id 的元素。

### 属性选择器

选择具有指定属性的元素。

### 交集选择器

选择满足多个选择器的元素。

```css
h3.special{
    color:red;
}
</style>
```

选择的元素要求同时满足两个条件：必须是 `<h3>`，然后其 class 必须为 special 。

### 并集选择器

多个选择器用`,`隔开

### 后代选择器

选择当前元素的所有子元素，用空格隔开。

### 子代选择器

选择当前元素的直接子元素。

### 兄弟选择器

选择紧跟在当前元素之后的元素。

### 伪选择器

`::`

### 伪类选择器

`:`

## 盒子类型

### 行盒

- display 属性为 inline 的元素是行盒，也叫行级元素；如 span、strong、button、em、a、img、video、audio。

- 文字一定是行盒（文字会产生匿名行盒将其包裹）。

- 内部产生参考线：一个元素中包含行盒，通常会给行盒设置 vertical-align:baseline，这会导致两个元素的参考线对齐。

- 同一个包含块中，连续多个行盒水平依次排列，剩余空间排列不下，才会换行。

- 行盒不能包含块盒（a 元素除外）。

- 设置 width 和 height 无效；调整行盒的 width 与 height 应使用字体大小、行高、字体类型等间接调整。

- 产生空白合并：代码中的连续空白字符，在页面显示时，会被合并为一个空格。

- 设置内外边距及边框，水平方向有效，垂直方向只会影响元素的背景，不会影响其他盒子。

- 内部包含行块盒或可替换元素，行盒的高度只和文字内容的字体大小有关系，和行块盒或可替换元素无关。

### 块盒

- display 属性为 block 的元素，也叫块级元素；如 div、h1~h6、pre、ul、li、p。
- 同一个包含块中，每个块盒独占一行。
- p 元素不能包含 div 元素。

### 行块盒

- display 属性为 inline-block 的元素，也叫行块级元素；没有默认值为 inline-block 的元素。
- 同一个包含块中，连续的多个行块盒水平依次排列。
- 行块盒内部一定会产生参考线。
- 产生空白合并

## 盒子模型

在 CSS 中，每一个元素都可以看作是一个盒子，这个盒子由以下几个方面组成。目前常用的有两种盒模型，分别是标准盒模型和怪异盒模型。

### 一个盒子的组成

- 内容（content）
- 内边距（padding）
- 边框（border）
- 外边距（margin）

### 标准盒模型

box-sizing 的值为 content-box 的元素；且浏览器将采用标准模式解析。

盒子总宽度 = width + padding（左右）+ border（左右）+ margin（左右）。

盒子总高度 = height + padding（上下）+ border（上下）+ margin（上下。

### 怪异盒模型

box-sizing 的值为 border-box 的元素；且浏览器将采用怪异模式（兼容模式）解析，也叫 IE 盒模型。

盒子总宽度 = width + margin（左右），其 width 包含了 padding（左右）和 border（左右）的宽度。

盒子总高度 = width + margin（上下），其 height 包含了 padding（上下）和 border（上下）的

## 字体

### 参考线

当制作文字时，会出现几根参考线。不同的文字类型，参考线位置、距离都不一样，同一种文字类型，参考线一致。

**组成**

- text_top ascent，顶线
- super，上基线
- baseline，基线
- sub，下基线
- text_bottom descent，底线

**决定因素**

- font-family：定义参考线的相对距离。
- font-size：定义参考线之间的距离。
- line-height：定义参考线的顶部空隙与底部空隙。

### 元素的基线

**img**：基线位置位于 img 的下外边距的最底边。

**from**：基线位于其内容的底边。

**行块盒**：父元素内部包含行块盒（高度自适应） ，会因为行块盒最后一行有 line-box，则会导致行块盒用最后一行的基线作为整个父元素的基线。若父元素中没有行盒，则使用父元素的下外边距作为基线。

### **font-size**

用该属性设置字体大小时，改变的是文字的相对大小，也叫字体框大小。

制作文字时，文字外面会有一个字体框，不同的文字的字体框，大小也不一样；即设置文字的小大，本质改变的是文字的相对大小。

**相对大小**

若一个文字的相对大小（字体框大小）为 2048 时，那么它顶线到基线的距离为 1884，底线到基线的距离为 514，则顶线到底线的距离为 1884 + 514 = 2398。（可以拙见为一个字体的高为 2048，那么该字体占的实际区域是 2390，因此某些字体会有默认边距）

文字顶线到底线的距离，叫做文字的实际大小（content-area），也叫内容区。即行盒的背景，填充的是文字的实际大小。因此当我们给行盒设置背景时，会导致行盒上下有留白。即上部分留白 + 行盒背景 + 下部分留白 = 文字的相对大小。

### line-height

用于设置多行元素的空间量。

**top**：文字顶线向上延申的空间。

**bottom**：文字底线向下延申的空间。

### 空隙

- 这两个空间（top 与 bottom）的空间量一定相等，这两个空间叫做空隙（line gap）。
- **通常，空隙是字体设计者决定的，因此有些字体没有空隙，但有的字体有空隙，有的字体空隙是负数。**

### 虚拟区

- top 到 botoom 的距离，叫做虚拟区（virtual-area），有的虚拟区和内容区相等，有的虚拟区比内容区小，但大部分虚拟区都比内容区大；因此设置行高大小就等于设置虚假区的大小。
- 因为虚拟区上下两边都相等，所以字体的实际大小在虚拟区之间。

### line-box

- line-box（行框）是承载文字内容的必要条件，如果没有行框，文字将无法显示。
- 当有多行行盒排列时，每一行的区域就叫做 line-box，line-box 的顶边是该行所有行盒的最顶边，底边是该行行盒的最低底边。即一个行盒的实际占用高度是通过 line-box 计算的。

**不生成 line-box 的情况**

- 元素内部没有行盒。
- 元素的字体大小为 0。

## 块格式化上下文

格式化上下文（Block Formatting Context），它是一块 **独立的渲染区域**，它规定了在该区域中，普通流块盒的布局。

### 触发 BFC 的元素

- 根元素 html，该元素创建的 BFC 覆盖了文档中的所有元素。
- 浮动元素，float 的值不为 none 的元素。
- 绝对定位元素，position 的值为 absolute 或 fixed 的元素。
- overflow 的值不为 visible 的块盒。
- 行块盒，display 的值为 inline-block 的元素。
- 表格单元格，display 的值为 table-cell 的元素，表格单元格默认为该值。
- 表格标题，display 的值为 table-caption 的元素，表格标题默认为该值。

### 正常布局流块盒的渲染区域

- 每个块盒都会参与块格式化上下文的创建。
- 不同的 BFC，它们进行渲染时互不干扰。
- 创建 BFC 的元素，隔绝了它内部和外部的联系，内部的渲染不会影响到外部区域。
- 创建 BFC 的元素，它的所有内容都会被包含在它所创建的 BFC 中

### BFC 的作用

#### 解决高度塌陷

创建 BFC 的元素，它的自动高度会计算浮动元素；若只是为了创建 BFC 一般使用副作用最小的方式：设置块盒的 overflow 的属性值为 hidden。仅仅是为了解决高度坍塌，建议使用伪元素 after。

**原理**：因为它要隔绝内部与外部的关系，而高度坍塌会使元素不在其包含块内，所以它的自动高度必须计算浮动元素，因此创建 BFC 可以解决高度坍塌的问题。

#### **解决浮动流脱离文档流**

创建了 BFC 的元素，普通流元素不会与浮动元素合并。

**原理**：在一个浮动元素后面放一个正常布局流元素，默认情况下浮动元素会覆盖正常布局流元素，因此可以给普通流创建 BFC，即可解决浮动元素脱离文档流。类似于给正常布局流元素设置了 margin，使普通流元素刚好避开浮动元素。这时候可能给正常布局流元素设置 margin 会无效，因此可以设置浮动元素的 margin，使浮动元素的 margin 将正常布局流元素挤开。

#### 解决 margin 合并

创建 BFC 的元素，不会和它的子元素发生 margin 合并。

当两个元素处于两个不同的父元素创建的 BFC 时，它们的渲染是互不干扰的，因此两个元素的 margin 不会合并。

**注意**：当两个子元素处于同一个父元素所创建的 BFC 时，则两个子元素的 margin 会合并。

## 层叠上下文

它是一块区域，它由某个元素创建，它规定了该区域中的内容在 Z 轴上排列的先后顺序。

它是一种 **三维概念**。所有的 HTML 元素都根据其元素的属性按照优先级顺序占据这个空间。

### 规则

只有定位元素设置 z-index 有效。

设置 z-index 值为负数的元素，会被正常流、浮动流覆盖。

z-index 的值，该值越大，则越靠近用户。

所有元素都处于 html 元素的层叠上下文中。

如遇到 z-index 一样的层叠上下文，则比较元素的书写顺序。

层叠上下文的元素，它本身永远被父级包含内，哪怕该元素设置了 z-index:-9999，它也只能包含于自身父元素的层叠上下文中。

每一个层叠上下文的元素，它们都完全独立于同级的元素，当处理层叠上下文时只会考虑自己的子元素。

### 创建层叠上下文的元素

- 根元素（html）。
- Position 值为 absolute 或 relative 且 z-index 值不为 auto 的元素。
- Opacity 的值小于 1 的元素。

### 优先级

- 同一个层叠上下文中，元素从底部到顶部的优先级
- 创建层叠上下文元素的背景和边框。
- z-index 的值为负的层叠上下文元素。
- 常规流非定位元素的块盒。
- 非定位的浮动流。
- 常规流非定位行盒。
- 任何 z-index 属性值为 auto 的定位子元素，以及 z-index 为 0 的元素。
- z-index 的值为正的元素。

## 层叠

层叠是 CSS 的一个基本特征，浏览器通过 **优先级** 来判断哪些属性值对一个元素最为重要，从而在这个元素上应用这些属性值。

### 确定声明值

找出样式表中没有冲突的声明，并应用到 CSS 属性，样式声明不冲突则不会发生层叠。

### 层叠

对样式表中有冲突（同一个元素在样式表中设置了多个相同的属性）的声明使用层叠规则。

#### 比较重要性

- 重要性由高到低为
- 样式表中的 !imliortant 样式（尽量不使用）。
- 样式表中的普通样式（内联式 > 内嵌式 > 外链式）。
- 浏览器中的默认样式。

#### 比较优先级

- 选择器选中的范围越窄，优先级越高。
- 通过选择器，计算出一个四位数（xxxx），该四位数越大越则优先级越高。这个四位数的进制为逢 256 进一。
- `:nth-child()`选择器会覆盖`:hover`选择器

#### 四位数的取值

- 千位：内联样式，记作 1，否则记为 0。
- 百位：所有 id 选择器的数量。
- 十位：所有类选择器、属性选择器、伪类选择器的数量。
- 个位：元素选择器、伪元素选择器的数量。

- 零：通配符选择器。

#### 比较源次序

CSS 样式书写靠后的属性最终会应用到元素。

### 继承

使用继承，对仍然没有值的属性，若可以继承（部分属性是不能继承的，通常情况下，只有跟文字内容有关的属性可以被继承。），则继承其父元素的属性。

当元素的属性有默认值时，该元素一般不会继承父元素的属性。

### 使用默认值

每个 CSS 在属性都会有默认值，当继承结束后，对于仍然没有值的属性，会使用默认值。

## Body 背景图

### 画布

它是一块区域，也叫视口（可视窗口）。

它的最小宽度为视口宽度，最小高度为视口高度。

### Html 的背景图

该元素的背景覆盖画布。即给该元素设置背景，相当于设置画布的背景。

### Body 的背景图

若根元素有背景，body 元素的背景正常显示。

若根元素没有设置背景，则 body 元素的背景覆盖画布，则会出现不正常的现象，原因为若没有这个规则，就无法给整个网页设置背景。

### 背景图覆盖画布时

**高度**：纵向位置百分比、预设值，相对于根元素高度。

**宽度**：横向位置百分比、预设值，相对于视口。